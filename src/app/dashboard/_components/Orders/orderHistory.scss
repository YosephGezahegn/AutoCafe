/* ─── Inline Calendar ────────────────────────────────────────────────────────── */

.historyCalendar {
	padding: 16px;
	background: var(--colorBackgroundPrimary);
	border-bottom: 1px solid var(--borderLighter);
	display: flex;
	flex-direction: column;
	gap: 12px;
	position: sticky;
	top: var(--initialHeaderHeight);
	z-index: 4;
	margin-top: var(--initialHeaderHeight);

	&__nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0 4px;
	}

	&__navBtn {
		all: unset;
		cursor: pointer;
		width: 28px;
		height: 28px;
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: 6px;
		font-size: 18px;
		transition: background 0.15s ease;

		&:hover {
			background: var(--colorBackgroundSecondary);
		}
	}

	&__monthLabel {
		font-size: 14px;
		font-weight: 700;
		color: var(--colorContentPrimary);
	}

	&__weekRow {
		display: grid;
		grid-template-columns: repeat(7, 1fr);
		text-align: center;
	}

	&__weekDay {
		font-size: 11px;
		font-weight: 700;
		text-transform: uppercase;
		opacity: 0.4;
		letter-spacing: 0.05em;
	}

	&__grid {
		display: grid;
		grid-template-columns: repeat(7, 1fr);
		gap: 4px;
	}

	&__day {
		all: unset;
		cursor: pointer;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 13px;
		font-weight: 500;
		border-radius: 8px;
		position: relative;
		transition: all 0.15s ease;

		&.no-session {
			opacity: 0.3;
			cursor: default;
		}

		&.has-session {
			font-weight: 700;

			&::after {
				content: "";
				position: absolute;
				bottom: 4px;
				width: 4px;
				height: 4px;
				border-radius: 50%;
				background: hsl(var(--colorBrandPrimary));
			}
		}

		&.today {
			color: hsl(var(--colorBrandPrimary));
			background: hsl(var(--colorBrandPrimary) / 8%);
		}

		&.selected {
			background: hsl(var(--colorBrandPrimary)) !important;
			color: #fff !important;
			box-shadow: 0 4px 10px hsl(var(--colorBrandPrimary) / 30%);

			&::after {
				background: #fff;
			}
		}

		&:hover:not(.no-session):not(.selected) {
			background: var(--colorBackgroundSecondary);
		}
	}

	&__clear {
		all: unset;
		cursor: pointer;
		font-size: 12px;
		font-weight: 600;
		color: hsl(var(--colorBrandPrimary));
		text-align: center;
		padding: 6px;
		border-radius: 6px;
		transition: background 0.15s ease;

		&:hover {
			background: hsl(var(--colorBrandPrimary) / 5%);
		}
	}
}

/* ─── Left navigation ──────────────────────────────────────────────────────── */

.historyNav {
	padding-bottom: 20px;
	box-sizing: border-box;

	&__tableGroup {
		margin-bottom: 8px;
	}

	&__tableHeader {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 10px 20px 8px;
		position: sticky;
		top: calc(var(--initialHeaderHeight) + 242px);
		z-index: 3;
		background: var(--colorBackgroundSecondary);
		border-bottom: 1px solid var(--borderLighter);
	}

	&__tableName {
		font-size: 12px;
		font-weight: 700;
		letter-spacing: 0.06em;
		text-transform: uppercase;
		opacity: 0.45;
		margin: 0;
	}

	&__totalBadge {
		font-size: 11px;
		font-weight: 700;
		background: var(--colorBackgroundTertiary, rgba(0, 0, 0, 0.06));
		border-radius: 100px;
		padding: 2px 7px;
		opacity: 0.55;
	}

	&__dates {
		display: flex;
		flex-direction: column;
		padding: 4px 0;
	}

	&__empty {
		font-size: 13px;
		opacity: 0.5;
		text-align: center;
		padding: 24px 16px;
		margin: 0;
	}
}

/* ─── Date pill ─────────────────────────────────────────────────────────────── */

.historyDateCard {
	all: unset;
	box-sizing: border-box;
	display: flex;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	padding: 10px 20px;
	cursor: pointer;
	border-radius: 10px;
	transition: background 0.15s ease, color 0.15s ease;

	&:hover:not(.active) {
		background: rgba(0, 0, 0, 0.04);
	}

	&.active {
		background: hsl(var(--colorBrandPrimary));
		box-shadow: 0 4px 14px hsl(var(--colorBrandPrimary) / 35%);

		.historyDateCard__date {
			color: #fff;
		}

		.historyDateCard__badge {
			background: rgba(255, 255, 255, 0.25);
			color: #fff;
		}
	}

	&__date {
		font-size: 14px;
		font-weight: 500;
		color: var(--colorContentPrimary);
	}

	&__badge {
		font-size: 11px;
		font-weight: 700;
		padding: 2px 8px;
		border-radius: 100px;
		background: var(--colorBackgroundTertiary, rgba(0, 0, 0, 0.07));
		color: var(--colorContentSecondary);
		min-width: 20px;
		text-align: center;
	}
}

/* ─── Order Card ───────────────────────────────────────────────────────────── */

.orderCard {
	display: flex;
	flex-direction: column;
	border-radius: 12px;
	overflow: hidden;
	background: var(--colorBackgroundPrimary);
	border: 1px solid var(--borderLighter);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
	height: max-content;
	animation: orderCardIn 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) both;

	/* Top accent color bar */
	&__accent {
		height: 4px;
		width: 100%;
		background: #ee4d2d; 
	}

	/* Header */
	&__header {
		display: flex;
		align-items: flex-start;
		justify-content: space-between;
		padding: 14px 16px 12px;
		border-bottom: 1px solid var(--borderLighter);
		background: rgba(0, 0, 0, 0.015);
	}

	&__headerLeft {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	&__title {
		font-size: 14px;
		font-weight: 700;
		margin: 0;
		color: var(--colorContentPrimary);
	}

	&__meta {
		font-size: 12px;
		opacity: 0.6;
		margin: 0;
		font-variant-numeric: tabular-nums;
	}

	&__badge {
		font-size: 11px;
		font-weight: 700;
		padding: 4px 8px;
		border-radius: 6px;
		background: var(--colorBackgroundTertiary);
		color: var(--colorContentSecondary);
		white-space: nowrap;
	}

	/* Product List */
	&__body {
		padding: 14px 16px;
		display: flex;
		flex-direction: column;
		gap: 10px;
	}

	&__row {
		display: flex;
		justify-content: space-between;
		align-items: center;
		font-size: 13px;
		color: var(--colorContentPrimary);
	}

	&__itemName {
		display: flex;
		align-items: center;
		gap: 6px;
	}

	&__qty {
		font-size: 11px;
		font-weight: 700;
		opacity: 0.5;
	}

	&__itemPrice {
		font-weight: 600;
		font-variant-numeric: tabular-nums;
	}

	/* Footer */
	&__footer {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 12px 16px;
		background: var(--colorBackgroundSecondary);
		border-top: 1px solid var(--borderLighter);
		margin-top: auto;

		span:first-child {
			font-size: 11px;
			font-weight: 700;
			text-transform: uppercase;
			opacity: 0.5;
			letter-spacing: 0.05em;
		}

		span:last-child {
			font-size: 16px;
			font-weight: 700;
			color: hsl(var(--colorBrandPrimary));
		}
	}
}

@keyframes orderCardIn {
	from {
		opacity: 0;
		transform: scale(0.96) translateY(10px);
	}
	to {
		opacity: 1;
		transform: scale(1) translateY(0);
	}
}

/* ─── Responsive ─────────────────────────────────────────────────────────────── */

@media (width <= 750px) {
	.historyNav {
		width: 100%;
	}
	.historyGrid {
		padding: 10px !important;
	}
}
